; -------------------------------------------------------------------------
; Primary Ruleset Definitions file for the 2025 CEC Title-24 Residential Energy Code
; -------------------------------------------------------------------------
; Copyright (c) 2012-2022, California Energy Commission
; Copyright (c) 2019-2022, SAC Software Solutions, LLC
; All rights reserved.
; Redistribution and use in source and binary forms, with or without modification,
; are permitted provided that the following conditions are met:
; - Redistributions of source code must retain the above copyright notice, this
;   list of conditions and the following disclaimer.
; - Redistributions in binary form must reproduce the above copyright notice, this
;   list of conditions, the following disclaimer in the documentation and/or other
;   materials provided with the distribution.
; - Neither the name of the California Energy Commission nor the names of its
;   contributors may be used to endorse or promote products derived from this
;   software without specific prior written permission.
; DISCLAIMER: THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
; "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
; THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
; NON-INFRINGEMENT ARE DISCLAIMED. IN NO EVENT SHALL CALIFORNIA ENERGY COMMISSION,
; WRIGHTSOFT CORPORATION, ITRON, INC. OR ANY OTHER AUTHOR OR COPYRIGHT HOLDER OF
; THIS SOFTWARE (COLLECTIVELY, THE "AUTHORS") BE LIABLE FOR ANY DIRECT, INDIRECT,
; INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
; LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
; OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
; LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
; OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
; ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  EACH LICENSEE AND SUBLICENSEE OF THE
; SOFTWARE AGREES NOT TO ASSERT ANY CLAIM AGAINST ANY OF THE AUTHORS RELATING TO
; THIS SOFTWARE, WHETHER DUE TO PERFORMANCE ISSUES, TITLE OR INFRINGEMENT ISSUES,
; STRICT LIABILITY OR OTHERWISE.
; -------------------------------------------------------------------------

;-------------------------------------------------------------------------
; This file is defined in several sections, defined as follows:
;-------------------------------------------------------------------------
;
; Section 1:  Character strings identifying the Compliance Ruleset defined
;
; Format:
;    The reserved words RULESETID and RULESETVERSION, each followed by a
;    character string (in quotes) which defined these ruleset identifier
;    strings.
;
;-------------------------------------------------------------------------
;
; Section 2:  List of files containing LOOKUP TABLES which can be Referenced
;             by the compliance rules.
;
; Format:
;    This section starts with the reserved word: TABLELIST.
;    Each line following TABLELIST defines a file containing a lookup table
;    and is formatted as follows:
;       <Table Name>( <File Name>, <# Search Parameters>,
;                     <# Columns Data (excluding search parameters)> )
;       Field Definitions:
;          <Table Name>          : Table name which rules can Reference.
;          <File Name>           : ASCII text file which contains the lookup
;                                  table data.
;          <# Search Parameters> : Number of parameters passed to the lookup
;                                  table in order to return a single value.
;          <# Columns Data>      : Number of columns of data in the lookup
;                                  table which follow the search parameters
;                                  and can be returned from the table.
;    This section ends with the reserved word: END.
;
;-------------------------------------------------------------------------
;
; Section 3:  Definition of other specific rules-defining data files.
;
; Format:
;    This section contins the reserved words DATATYPES, RANGES, SYMBOLS and
;    LIBRARY, each followed by the ASCII text file names which contain the
;    respective data.
;
;-------------------------------------------------------------------------
;
; Section 4:  Definition of each set of compliance rules (or RuleList).
;
; Format:
;    This section contains the actual compliance rules themselves, separated
;    into several lists of rules (rulelists).  Each rulelist begins with the
;    reserved word RULELIST followed by the name of the rulelist, a series
;    of rulelist parameters (described below) and ending with the reserved
;    word END.
;
;    Immediately following each rulelist name are 3-4 integer values (0 or 1)
;    - The first indicating whether or not the rules in the list are to be
;      evaluated regardless of the datatype flags.  A value of 1 means each
;      rule is evaluated no matter what the datatype is set to.  A value of 0
;      means that each rule is evaluated only if its datatype is "Prescribed"
;      or "NotInput" or if the value currently installed in the database was
;      NOT either Library or User defined.
;    - The second value indicates whether or not this rulelist can be evaluated
;      multiple times ....
;    - The third indicates whether or not the values set by the rules in the
;      rulelist are to always be classified as User-Defined (1) vs. the
;      normal ruleset-defined flags (0).
;    - (only for RULESET_STRUCT_VERSION >= 5):
;      Flag to prevent SetBDData RESETS from occurring (if 1).  A default value
;      of 0 indicates that normal SetBDData resets are to occur.
;
;    Each rule within each rulelist is defined in the following format:
;       <Rule ID> <Bldg DBase Parameter>[<Index>] = <Value/Expression>
;
;       Field Definitions:
;          <Rule ID>              : Rule ID string (in quotes).
;                                   Note: The rule compiler will automatically
;                                   begin the ID string with:
;                                   "Rule L#.R#, Line N: " where L# = RuleList
;                                   index (1-8), R# = index to rule in
;                                   RuleList and N = rule file line number
;                                   where rule is defined.
;          <Bldg DBase Parameter> : Building database parameter being
;                                   defined by the compliance rule.
;          <Index>                : The array index of the building database
;                                   parameter being defined.  The
;                                   "[<Index>]" part of the rule must
;                                   be present for all building database
;                                   parameters which are defined as an
;                                   array of values and cannot be present
;                                   for those building database parameters
;                                   that are single values (not an array).
;          <Value/Expression>     : A single value or expression which
;                                   defines the value of the building
;                                   database parameter being set.  All
;                                   expressions must be enclosed in curly
;                                   brackets (i.e. {}).
;
;-------------------------------------------------------------------------
;
; Special Reserved Values:
;
;    NONE       => Sets an object parameter such that no object is assigned
;    UNCHANGED  => Prevents a rule from modifying the property being evaluated
;    UNDEFINED  => Causes the property being evaluated to become undefined
;                  (void of any valid input or default value/selection)
;
;-------------------------------------------------------------------------
;
; Key to RULESET_STRUCT_VERSION values:
;    none   => Structure up through 6/11/00
;       2   => New integer value at the end of each RULELIST definition
;              which indicates whether or not the rulelist can be evaluated
;              multiple times (caused by library imports during evaluation)
;       3   => Add TagAllDataAsUserDefined flag at end of RULELIST definitions
;       4   => Added rulelist line number & filename to CRuleList class to
;              enable reporting in compiler output (no change to text format)
;       5   => Added PreventSetBDDataResets flag at end of RULELIST definitions
;
;-------------------------------------------------------------------------


RULESET_STRUCT_VERSION  5     ; added 6/12/00 to enable new structure mods while maintaining backward compatibility


RULESETID       "CA Residential 2025"
RULESETVERSION  "CA Residential 2025, Vers. 2"


BEMBASEFILE     "CA Res 2025\CAR25 BEMBase.bin"
SCREENSFILE     "CA Res 2025\CAR25 Screens.txt"
TOOLTIPSFILE    "CA Res 2025\CAR25 ToolTips.txt"


TABLELIST
  TDVM02Table( "T24R 2025 SLCCbyCZandFuel-interleaved.csv", 1, 48 )     ; SAC 11/15/22  ; renamed file - SAC 11/29/22
;  TDVM02Table( "T24R 2022 TDV by CZ and Fuel - 15pctRtlAdder-wCH4Leak20yrGWP.csv", 1, 48 )     ; SAC 2/6/12    ; SAC 11/17/19    ; SAC 3/3/20    ; SAC 4/22/20
  T24SrcEnergyTable( "T24R 2025 SOURCEbyCZandFuel-interleaved.csv", 1, 48 )     ; SAC 11/15/22  ; renamed file - SAC 11/29/22
;  T24SrcEnergyTable( "T24 2022 SrcEnergy by CZ and Fuel - PolicyDeepDecarbon.csv", 1, 48 )     ; SAC 6/10/19 - 2022   ; SAC 9/17/19   ; SAC 11/16/19
  HrlyNEMTable( "T24 2025 NEM3 Factors by CZ.csv", 1, 16 )     ; SAC 05/16/23 (NEM3)
  T24RSlabEdgeInsulationTable( "T24RSlabEdgeInsulation.csv", 1, 10 )     ; SAC 1/6/13 - added table
  T24RHeatingEquipmentTable( "T24RHeatingEquipment.csv", 0, 0 )     ; SAC 1/2/13 - added table // SAC 1/9/13 - 4->8 deps // SAC 1/10/13 - updated to new syntax and added SysAvail & IsHP
  T24RCoolingEquipmentTable( "T24RCoolingEquipment.csv", 0, 0 )     ; SAC 1/9/13 - added table // SAC 1/10/13 - updated to new syntax and added SysAvail & IsHP
  T24RBuriedDuctsTables( "T24RBuriedDucts.csv", 0, 0 )     ; SAC 4/5/19 - added tables for 2019 buried ducts (tic #874)
  T24RClimateZoneDesignDayTable( "T24RClimateZoneDesignDay.csv", 0, 0 )     ; SAC 1/3/13 - added table - 0's imply NEW table format
  T24RCZWeatherMappingTable( "T24RCZWeatherMapping.csv", 0, 0 )     ; SAC 4/21/19 - added to enable weather file substitutions via batch processing
  T24_2022WeatherLocationData( "HOF_2021_Climate_Design_Conditions_IP_California_Locations-T24N_2022.csv", 0, 0 )    ; SAC 08/31/22 (tic #1338)
  CAResFileHashesTable( "CAResFileHashes25.csv", 0, 0 )     ; SAC 9/12/13 - added table   - SAC 11/19/15 - removed '13' from name   - SAC 06/09/22
  CAResKeyTable( "CAResKey.csv", 0, 0 )     ; SAC 9/12/13 - added table   - SAC 11/19/15 - removed '13' from name
  T24RMaterialLibraryMapTable( "T24RMaterialLibraryMap.csv", 0, 0 )     ; SAC 3/12/14 - added table
  CAHPMultTable( "CAHPMultTable.csv", 0, 0)	; SAC 5/5/14 - intgrated from MM-TRC
  CAHPIncTable( "CAHPIncTable.csv", 0, 0)		; SAC 5/5/14 - intgrated from MM-TRC
  PeakDemandTable( "CARes25_PeakDemand.csv", 1, 1 )     ; SAC 8/25/14 - different table for 2016   ; SAC 10/6/16 - 2016->2019   ; 2019->22 - SAC 06/01/22 (tic #1267)   ; 2025 - SAC 11/30/22
  PeakCoolingElecEnergyTable( "CARes25_PeakCoolingElecEnergyMults.csv", 1, 1 )     ; SAC 08/08/23 (2025)
  T24RClimateZoneCodeBaseTable( "T24RClimateZoneCodeBaselines.csv", 0, 0 )	; mjb 1/12/15 - added table to calc Design Ratings using one of several code baselines - Proj:StdDesignBase specifies which code to look up in this table
  PrescriptiveAdditionsTables( "PrescriptiveAdditionsTables.csv", 0, 0 )	; EM 2/19/15
  T24RClimateZoneInletMainsTempTable( "T24RClimateZoneInletMainsTemp.csv", 0, 0, )	; SAC 7/17/15
;  T24RClimateZoneDHWASHPAdjTable( "T24RClimateZoneDHWASHPAdj.csv", 0, 0, )	; SAC 8/21/15  - removed since used only to set cseDHWHEATER:whHPAF which was removed from CSE by CB - SAC 1/22/20
  DHWTankAreaCoefsTable( "DHWTankAreaCoefs.csv", 0, 0, )		; SAC 8/21/15
  T24RDHWTables( "T24R_DHWTables.csv", 0, 0, )		; SAC 10/22/15
  CAHP2017ZGTable( "CAHP2017ZoneGroup.csv", 0, 0, )		; EW-TRC 6/30/17
  CAHP2017IncTable( "CAHP2017IncTable.csv", 0, 0, )		; EW-TRC 6/30/17
  NEEAHPWHDataTable( "HPWHData_NEEA.csv", 0, 0, )		   ; SAC 7/5/17 - tic #805
  CAUEFConvCat( "CAUEFConvCat.csv", 0, 0 )  ;LDH 170713 - tic 801
  CAUEFModelCoef( "CAUEFModelCoef.csv", 0, 0 )  ;LDH 170713 - tic 801
  CAUEFMinCoef( "CAUEFMinCoef.csv", 0, 0 )   ;LDH 170720 - tic 801/820
  CAGHG19_BaseAPCR_Elec(   "CA2019HrlyGHG-BaseAPCR-Elec.csv",       1, 16 )   ; SAC 9/21/17
  CAGHG19_BaseAPCR_NGas(   "CA2019HrlyGHG-BaseAPCR-Gas.csv",        1, 16 )   ; SAC 9/21/17
  CAGHG19_BaseAPCR_Othr(   "CA2019HrlyGHG-BaseAPCR-Propane.csv",    1, 16 )   ; SAC 9/21/17
  CAGHG19_MidResolve_Elec( "CA2019HrlyGHG-MidResolve-Elec.csv",     1, 16 )   ; SAC 9/23/17
  CAGHG19_MidResolve_NGas( "CA2019HrlyGHG-MidResolve-Gas.csv",      1, 16 )   ; SAC 9/23/17
  CAGHG19_MidResolve_Othr( "CA2019HrlyGHG-MidResolve-Propane.csv",  1, 16 )   ; SAC 9/23/17
  CAGHG19_HiResolve_Elec(  "CA2019HrlyGHG-HighResolve-Elec.csv",    1, 16 )   ; SAC 9/21/17
  CAGHG19_HiResolve_NGas(  "CA2019HrlyGHG-HighResolve-Gas.csv",     1, 16 )   ; SAC 9/21/17
  CAGHG19_HiResolve_Othr(  "CA2019HrlyGHG-HighResolve-Propane.csv", 1, 16 )   ; SAC 9/21/17
  CA_Carbon_Elec( "T24R 2025 CO2ElecEmissionsbyCZ.csv",  1, 16 )   ; SAC 11/15/22
;  CA_Carbon_Elec( "CA2022CarbonOnly-Elec-wCH4Leak20yrGWP.csv",  1, 16 )   ; SAC 9/30/17     ; SAC 11/26/19     ; SAC 4/22/20
  T24R_EDRFuelAdjustmentTable( "T24R_EDRFuelAdjustment.csv", 0, 0 )     ; SAC 6/25/19 - 2022
  T24R_OtherZoneSpcFuncTable(     "App5-4A_SpaceBySpace-T24N_2019.csv", 0, 0 )     ; SAC 9/3/19 - MFamProto
  T24R_OtherZoneVentSpcFuncTable( "App5-4C_Ventilation-T24N_2019.csv",  0, 0 )     ; SAC 9/3/19 - MFamProto
  T24R_OtherZoneFuncSchedGroupsTable( "App5-4B_FunctionScheduleGroups.csv",  0, 0 )    ; SAC 10/4/19 - MFamProto
  SolarThermalCollectorsTable( "SolarThermalCollectors.csv",  0, 0 )    ; SAC 1/14/20 (tic #1013)
  SolarCollectorCountEst( "T24R_SolarCollectorCountEst.csv",  0, 0 )    ; SAC 1/28/20 (StdSolarSys)
  T24R_CommunitySolar( "T24R_CommunitySolar.csv", 0, 0, )		   ; SAC 7/16/20 (CommunitySolar)
  T24R_CentralHPWHCompressors( "T24R_CentralHPWHCompressors.csv", 0, 0, )     ; SAC 08/31/20
  T24RDemandResponseHPWH_Sched( "T24RDemandResponseHPWH_Sched.csv", 0, 0 )    ; SAC 12/03/20
  T24RCustomStandardDesign( "T24RCustomStdDesign.csv", 0, 0 )    ; SAC 02/05/21
END


DATATYPES          "DataType.txt"
RANGES             "Ranges.txt"
SYMBOLS            "Symbols.txt"
MAXCHILD           "MaxChild.txt"
RESETS             "Resets.txt"
UNIQUEASSIGNMENTS  "UniqueAssignments.txt"
LIBRARY            "Library.txt"
LIBRARY            "Library_Schedules-T24N.rule"


RULEFILE   "Rules_Default.rule"
RULEFILE   "Rules_Default_Loads.rule"
RULEFILE   "Rules_Default_Shell.rule"
RULEFILE   "Rules_Default_OtherZone.rule"
RULEFILE   "Rules_Default_Construction.rule"
RULEFILE   "Rules_Default_HVAC.rule"
RULEFILE   "Rules_Default_DHW.rule"
RULEFILE   "Rules_Default_DHW-MFam.rule"
RULEFILE   "Rules_Default_EAA.rule"
RULEFILE   "Rules_Default_PV.rule"
RULEFILE   "Rules_Default_Battery.rule"
RULEFILE   "Rules_Default_CAHP.rule"
RULEFILE   "RuleRepoRev.rule"
RULEFILE   "ProposedFlexibility.rule"
RULEFILE   "StandardMixedFuel.rule"
RULEFILE   "Rules_CSE_Simulation.rule"
RULEFILE   "Rules_CSE_Simulation_Cons.rule"
RULEFILE   "Rules_CSE_Simulation_Zones-IntGains.rule"
RULEFILE   "Rules_CSE_Simulation_Surfaces.rule"
RULEFILE   "Rules_CSE_Simulation_IntMass.rule"
RULEFILE   "Rules_CSE_Simulation_HVAC.rule"
RULEFILE   "Rules_CSE_Simulation_DHW.rule"
RULEFILE   "Rules_CSE_Simulation_PV.rule"
RULEFILE   "Rules_CSE_Simulation_Battery.rule"
RULEFILE   "Rules_CSE_Simulation_Reports.rule"
RULEFILE   "Rules_ModelChecks.rule"
RULEFILE   "Rules_ProposedModelPrep.rule"
RULEFILE   "Rules_BudgetConversion.rule"
RULEFILE   "Rules_BudgetConversion_DHW.rule"
RULEFILE   "Rules_Results.rule"
RULEFILE   "Rules_Results_SrcEnergy.rule"
RULEFILE   "Rules_Results_PropFlex.rule"
RULEFILE   "Rules_Results_Carbon.rule"
RULEFILE   "Rules_Rpt_BuildingSummaryCSV.rule"
RULEFILE   "CF1RPRF01E_Master.rule"
RULEFILE   "CF1RPRF01E_Auto.rule"
RULEFILE   "CF1RPRF01E_SpecialFeatures.rule"
RULEFILE   "CF1RPRF01E_HERSFeatures.rule"
RULEFILE   "Rules_Report_MixedFuelCompare.rule"
RULEFILE   "BatchRuns.rule"
RULEFILE   "Rules_HPXML.rule"

;*************************************************************************
;*************************************************************************


;*************************************************************************
RULELIST "Default_CodeVersion_RptGenUI" 0 0 0 0
;*************************************************************************
	"Set Proj:RptGenUIVer"     	Proj:RptGenUIVer     	= {	"09"  }				; <<<<----  MODIFY FOR EACH RELEASE  -----  (to reflect release version)
	"Set Proj:RptGenUIApp"     	Proj:RptGenUIApp     	= {	"CBECC-Res"  }
END
;*************************************************************************
RULELIST "Default_CodeVersion" 1 0 0 0
;*************************************************************************
																															; ************************************************************************************
   "Set Proj:DevMode"				Proj:DevMode				= {	1  }									; <<<<----  MODIFY FOR EACH RELEASE  -----  (1 if NON-release version, otherwise 0)
   "Set Proj:CompMgrVersion"		Proj:CompMgrVersion		= {	Format( "BEMCmpMgr 2025.0.7 (%g)", RuleRepoRev )  }	; <<<<----  MODIFY FOR EACH RELEASE  -----  (to reflect release version/build)
                                                               ; NOTE: above needs to be < 43 chars or CSE can throw TDV CSV reading errors
																															; ************************************************************************************

	"Set Proj:RptGenCompReport"	Proj:RptGenCompReport	= {	if (RunScope == 1) then  "CF1R_NCB_PRF19"  else  "CF1R_ALT_PRF19"  endif  }
	"Set Proj:RptGenCompRptID"		Proj:RptGenCompRptID		= {	"BEES"  }	; string inserted into report filename prior to file extension
	"Set Proj:RptGenServer"    	Proj:RptGenServer    	= {	"cf6r.com"  }
	"Set Proj:RptGenApp"       	Proj:RptGenApp       	= {	"ReportGeneratorRes2"  }
	"Set Proj:RptGenService"   	Proj:RptGenService   	= {	"ReportingService.svc"  }
	"Set Proj:SecKeyRLName"   		Proj:SecKeyRLName   		= {	"SetReportKeys"  }
	"Set Proj:RptGenCheckURL"   	Proj:RptGenCheckURL   	= {	"https://cf6r.com/RGServiceStatus/RGServiceStatus.svc/IsResServiceActive"  }
	"Set Proj:RptGenStatusURL"   	Proj:RptGenStatusURL   	= {	"http://title24docs.com/t24docs/CBECCResStatus/"  }
  ; SAC 11/20/18 - to facilitate CF1R XML schema-based report gen
	"Set Proj:RptGenSchemaApp"   	Proj:RptGenSchemaApp   	= {	"ReportGeneratorRes2025_RV"  }      ; 2022_RC"  }
	"Set Proj:RptGenSchemaSvc"   	Proj:RptGenSchemaSvc   	= {	"ReportGeneratorService.svc"  }
	"Set Proj:RptGenSchemaRpt"   	Proj:RptGenSchemaRpt   	= {	"CF1RPRF01E"  }

  ; SAC 9/23/14 - add certain labels that vary by code version
	"Set Proj:EnergyCodeYearNum"	Proj:EnergyCodeYearNum	= {	 2025   }
	"Set Proj:EnergyCodeYear"		Proj:EnergyCodeYear		= {	"2025"  }
	"Set Proj:AnalysisVersion"		Proj:AnalysisVersion		= {	 250007  }  ; YYMMmm (codeYear-Major-minor)
   "Set Proj:CSEName"            Proj:CSEName            = {   "CSE19"  }
	"Set Proj:SimReportHeader"   	Proj:SimReportHeader   	= {	"CA Res " + EnergyCodeYear + " Simulation"  }
	"Set Proj:BldgSmryCSVHeader"	Proj:BldgSmryCSVHeader	= {	EnergyCodeYear + " Building Energy Efficiency Standards\n"  }
   "Set Proj:CompMetricLbl_Short"   Proj:CompMetricLbl_Short = {  "LSC"  }    ; SAC 01/27/23
   "Set Proj:CompMetricLbl_Long"    Proj:CompMetricLbl_Long  = {  "Long-term System Cost"  }
   "Set Proj:CO2ElecTableMult - conversion factor from CO2 electric emissions look-up table units to tonnes CO2-e/kWh"     ; SAC 11/26/19 - while integrating 2022 tables
        Proj:CO2ElecTableMult	= {  1.0   }   ; table mults already in tonnes CO2-e/kWh
   "Set Proj:CO2FuelTableMult - conversion factor from CO2 fuel (NatGas & Other) emissions look-up table units to tonnes CO2-e/therm"
        Proj:CO2FuelTableMult	= {  0.01  }   ; tonnes/therm -> tonnes CO2-e/kBtu)
   "Set Proj:NatGasCarbonEmis"   Proj:NatGasCarbonEmis   = {   0.0058475  }    ; SAC 4/22/20 - from E3/MSontag: 2022_TDV_Emissions_Factor_CH4_Leak_20yr_15RA_20200422.xlsx
   "Set Proj:OtherCarbonEmis"    Proj:OtherCarbonEmis    = {   0.006309   }

   ; REMOVE following rule to enable report gen for 2025 analysis - SAC 12/01/22
   "Set Proj:BypassCompRptMsg"   Proj:BypassCompRptMsg   = {   "compliance report generation not yet available for 2025 analysis"   }

END;*************************************************************************


;*************************************************************************
;*************************************************************************

ENDFILE
